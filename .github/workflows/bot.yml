name: Bale Bot Automation

on:
  schedule:
    # Ù‡Ø± Ø±ÙˆØ² Ø³Ø§Ø¹Øª 8 ØµØ¨Ø­ Ø¨Ù‡ ÙˆÙ‚Øª Ø§ÛŒØ±Ø§Ù†
    - cron: '0 4 * * *'
    
    # Ù‡Ø± Ø´Ù†Ø¨Ù‡ Ø³Ø§Ø¹Øª 9 ØµØ¨Ø­
    - cron: '0 5 * * 0'
    
  workflow_dispatch:  # Ø§Ù…Ú©Ø§Ù† Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒ
  push:              # Ø¨Ø§ Ù‡Ø± push Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯
  pull_request:      # Ø¨Ø§ Ù‡Ø± PR Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯

jobs:
  send-message:
    runs-on: ubuntu-latest
    steps:
      - name: Send daily message
        run: |
          curl -X POST "https://tapi.bale.ai/bot${{ secrets.BALE_BOT_TOKEN }}/sendMessage" \
          -H "Content-Type: application/json" \
          -d '{
            "chat_id": "@your_channel_username",
            "text": "ğŸ“¢ Ù¾ÛŒØ§Ù… Ø±ÙˆØ²Ø§Ù†Ù‡ Ø§Ø² Ø·Ø±ÛŒÙ‚ GitHub Actions\n\nâ° Ø²Ù…Ø§Ù†: $(date)\nğŸš€ Ø§ÛŒÙ† Ù¾ÛŒØ§Ù… Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ Ø§Ø³Øª.",
            "parse_mode": "HTML"
          }'
          
      - name: Send success notification
        if: success()
        run: |
          echo "âœ… Ù¾ÛŒØ§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯"
          
      - name: Send failure notification
        if: failure()
        run: |
          echo "âŒ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ø§ Ø®Ø·Ø§ Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯"

  send-advanced-message:
    runs-on: ubuntu-latest
    needs: send-message
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
          
      - name: Send advanced message
        run: |
          python .github/scripts/send_advanced_message.py
        env:
          BOT_TOKEN: ${{ secrets.BALE_BOT_TOKEN }}

  school-announcements:
    runs-on: ubuntu-latest
    steps:
      - name: Send school announcement
        run: |
          MESSAGE="ğŸ« <b>Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ù…Ø¯Ø±Ø³Ù‡</b>
          
          ğŸ“… ØªØ§Ø±ÛŒØ®: $(date +'%Y/%m/%d')
          â° Ø²Ù…Ø§Ù†: $(date +'%H:%M')
          
          ğŸ“š Ø¨Ø±Ù†Ø§Ù…Ù‡ ÙØ±Ø¯Ø§:
          â€¢ Ø±ÛŒØ§Ø¶ÛŒ: ÙØµÙ„ Û´
          â€¢ Ø¹Ù„ÙˆÙ…: Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡
          â€¢ ÙØ§Ø±Ø³ÛŒ: Ø§Ù†Ø´Ø§
          
          ğŸ’¡ Ù†Ú©ØªÙ‡: Ù‡Ù…Ø±Ø§Ù‡ Ø¯Ø§Ø´ØªÙ† Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³ÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.
          
          Ø¨Ø§ Ø¢Ø±Ø²ÙˆÛŒ Ù…ÙˆÙÙ‚ÛŒØª ğŸ’«"
          
          curl -X POST "https://tapi.bale.ai/bot${{ secrets.BALE_BOT_TOKEN }}/sendMessage" \
          -H "Content-Type: application/json" \
          -d @- <<EOF
          {
            "chat_id": "@your_channel_username",
            "text": "$MESSAGE",
            "parse_mode": "HTML"
          }
          EOF
